<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="apple-touch-icon" sizes="57x57" href="favicon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="favicon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="favicon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="favicon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="favicon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="favicon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="favicon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="favicon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="favicon/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="favicon/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
	<link rel="manifest" href="favicon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="favicon/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vanilla's Camo Zombies Tracker</title>
    <link rel="stylesheet" href="styles/global.css">
       
</head>
<body>
    <div class="container">
        <h1>üßü <span style="color: #ff69b4;">Vanilla's</span> <span style="color: #4ecca3;">Camo Zombies Tracker</span> <span id="game-title" style="color: #ff8c00;">[BO6]</span> üßü</h1>

        <div id="server-warning" style="display: none; background: rgba(233, 69, 96, 0.2); border: 3px solid #e94560; border-radius: 10px; padding: 20px; margin: 20px 0; text-align: center;">
            <h2 style="color: #e94560; margin-bottom: 15px;">‚ö†Ô∏è Local Server Required ‚ö†Ô∏è</h2>
            <p style="font-size: 1.1em; margin-bottom: 10px;">This tracker requires a local web server to function properly.</p>
            <p style="margin-bottom: 15px;">You're currently viewing this file directly (file://) which prevents loading weapon categories.</p>
            <div style="background: rgba(0, 0, 0, 0.3); padding: 15px; border-radius: 5px; margin: 15px 0;">
                <p style="color: #4ecca3; font-weight: bold; margin-bottom: 10px;">Windows Users (Easiest):</p>
                <p style="margin: 5px 0;">Double-click: <strong style="color: #fff;">Run Local Python Server.bat</strong></p>
                <p style="margin: 5px 0;">Or: <strong style="color: #fff;">Run Local NodeJs Server.bat</strong></p>
                <p style="color: #4ecca3; font-weight: bold; margin: 15px 0 10px 0;">Command Line:</p>
                <p style="font-family: monospace; color: #fff; margin: 5px 0;"><strong>Python:</strong> python -m http.server 8000</p>
                <p style="font-family: monospace; color: #fff; margin: 5px 0;"><strong>Node.js:</strong> npx serve .</p>
                <p style="margin-top: 10px; font-size: 0.9em; color: #aaa;">Then open: http://localhost:8000</p>
            </div>
            <p style="font-size: 0.9em; color: #aaa;">See README.md for more details.</p>
        </div>

        <div class="progress-summary">
            <h2>Overall Progress</h2>
            <p id="overall-progress">0 / 1005 Camos Completed (0%)</p>
            <p id="weapon-progress">0 / 67 Weapons Complete</p>
        </div>

        <div class="info-box" style="text-align: center; background: rgba(255, 105, 180, 0.1); border-color: #ff69b4;">
            <p><h2><span style="color: #add8e6;">Last BO6 Updated: 10/21/2025</span></h2></p>
			<p><h3><span style="color: #00ff00;">Last Added: Chainsaw [Melee]</span></h3></p>
			<p> </p>
            <p><h2><span style="color: #add8e6;">Last BO7 Updated: 11/14/2025</span></h2></p>
			<p><h3><span style="color: #00ff00;">Last Added: Black Ops 7 ZM List</span></h3></p>
            <p>üíæ Importing/Exporting your .json file can be found at the bottom of the page</p>
			<p> Works Both for BO6 + BO7 Now! </p>
        </div>

        <div class="info-box">
            <h3>üìã Camo Structure (All Weapons)</h3>
            <ul>
                <li><strong>Military Camos (9):</strong> 100, 200, 300, 400, 600, 800, 1000, 1500, 2000 Critical Kills (Headshots)</li>
                <li><strong>Special Camos (2):</strong> Unique challenges per weapon (see below)</li>
                <li><strong>Mastery Camos (4):</strong> Mystic Gold, Opal, Afterlife, Nebula (unlock after completing all Special camos)</li>
            </ul>
        </div>

        <div class="game-selector" style="display: flex; justify-content: center; gap: 10px; margin: 20px 0; flex-wrap: wrap;">
            <button class="game-btn active" data-game="bo6" style="padding: 12px 24px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1em; font-weight: bold; transition: all 0.3s ease; box-shadow: 0 4px 6px rgba(0,0,0,0.3);">Black Ops 6</button>
            <button class="game-btn" data-game="bo7" style="padding: 12px 24px; background: #2a2a3e; color: #999; border: 2px solid #444; border-radius: 8px; cursor: pointer; font-size: 1em; font-weight: bold; transition: all 0.3s ease;">Black Ops 7</button>
        </div>

        <div class="category-tabs">
            <button class="tab-btn" data-category="assault-rifles">Assault Rifles</button>
            <button class="tab-btn" data-category="smgs">SMGs</button>
            <button class="tab-btn" data-category="shotguns">Shotguns</button>
            <button class="tab-btn" data-category="lmgs">LMGs</button>
            <button class="tab-btn" data-category="marksman-rifles">Marksman Rifles</button>
            <button class="tab-btn" data-category="sniper-rifles">Sniper Rifles</button>
            <button class="tab-btn" data-category="pistols">Pistols</button>
            <button class="tab-btn" data-category="launchers">Launchers</button>
            <button class="tab-btn" data-category="specials">Specials</button>
            <button class="tab-btn" data-category="melee">Melee</button>
        </div>

        <div id="category-content">
            <div class="loading">Select a category to begin tracking your camos!</div>
        </div>

        <div class="action-buttons">
            <button class="export-btn" onclick="exportProgress()">Export Progress</button>
            <button class="import-btn" onclick="importProgress()">Import Progress</button>
            <button class="reset-btn" onclick="resetProgress()">Reset All Progress</button>
        </div>

        <input type="file" id="import-file" accept=".json" onchange="handleImportFile(event)">
    </div>

    <script>
        // Game configuration
        const gameConfig = {
            bo6: {
                name: 'Black Ops 6',
                displayName: '[BO6]',
                totalCamos: 1005,
                totalWeapons: 67,
                camosPerWeapon: 15,
                categoryFolder: 'categories-bo6',
                camoImageSuffix: '_Camo_Icon_BO6.webp',
                storageKeys: {
                    progress: 'bo6CamoProgress',
                    collapsed: 'bo6CollapsedWeapons'
                }
            },
            bo7: {
                name: 'Black Ops 7',
                displayName: '[BO7]',
                totalCamos: 480, // 30 weapons √ó 16 camos (9 military + 3 special + 4 mastery)
                totalWeapons: 30,
                camosPerWeapon: 16,
                categoryFolder: 'categories-bo7',
                camoImageSuffix: '_Camo_Icon_BO7.webp',
                storageKeys: {
                    progress: 'bo7CamoProgress',
                    collapsed: 'bo7CollapsedWeapons'
                }
            }
        };

        // Current game state
        let currentGame = localStorage.getItem('selectedGame') || 'bo6';
        let currentCategory = null;

        // Get current game config
        function getGameConfig() {
            return gameConfig[currentGame];
        }

        // Switch game
        function switchGame(game) {
            currentGame = game;
            localStorage.setItem('selectedGame', game);

            // Update UI
            document.getElementById('game-title').textContent = gameConfig[game].displayName;
            document.querySelectorAll('.game-btn').forEach(btn => {
                if (btn.dataset.game === game) {
                    btn.classList.add('active');
                    btn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                    btn.style.color = 'white';
                    btn.style.border = 'none';
                    btn.style.boxShadow = '0 4px 6px rgba(0,0,0,0.3)';
                } else {
                    btn.classList.remove('active');
                    btn.style.background = '#2a2a3e';
                    btn.style.color = '#999';
                    btn.style.border = '2px solid #444';
                    btn.style.boxShadow = 'none';
                }
            });

            // Reload current category for the new game
            if (currentCategory) {
                loadCategory(currentCategory);
            }
            updateProgress();
        }

        // Load category content
        async function loadCategory(categoryName) {
            const content = document.getElementById('category-content');
            content.innerHTML = '<div class="loading">Loading...</div>';

            const config = getGameConfig();

            try {
                const response = await fetch(`${config.categoryFolder}/${categoryName}.html?v=${Date.now()}`);
                if (!response.ok) throw new Error('Category not found');

                const html = await response.text();
                content.innerHTML = html;

                // Update active tab
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.category === categoryName);
                });

                currentCategory = categoryName;

                // Setup event listeners first (creates buttons), then restore progress
                setupEventListeners();
                // Apply camo images to items where available (tries several extensions). This will
                // gracefully skip items where no image exists (e.g., special camo categories).
                applyCamoImages();
                restoreProgress();
                updateProgress();
            } catch (error) {
                content.innerHTML = '<div class="loading">Error loading category. Please try again.</div>';
            }
        }

        // Normalize a camo label into a filesystem-friendly base name
        function normalizeLabelForFile(label) {
            const config = getGameConfig();
            // Convert "100 Kills" -> "100_Camo_Icon_BO6.webp"
            // Convert "Purple Tiger" -> "PurpleTiger_Camo_Icon_BO6.webp"
            return label
                .replace(/\s*\(.*?\)\s*/g, '') // remove parenthetical notes
                .replace(/\s+/g, '') // remove spaces
                // Preserve existing capitals, capitalize words
                .replace(/(?:^|\s)([a-z])/g, m => m.toUpperCase())
                + config.camoImageSuffix; // add game-specific suffix
        }

        // Check whether an image exists at URL
        function imageExists(url) {
            return new Promise(resolve => {
                const img = new Image();
                img.onload = () => resolve(true);
                img.onerror = () => resolve(false);
                img.src = url;
            });
        }

        // Try to find and apply camo images for each .camo-item.
        // It checks a few common extensions and sets a subtle dark overlay so labels stay readable.
        async function applyCamoImages() {
            const items = document.querySelectorAll('.camo-item');
            if (!items || items.length === 0) return;

            // prefer modern webp first since your files are .webp
            // We know exact extension now
            const exts = ['webp'];

            // For each item, try to locate an image file in the camo/ folder that matches the label
            for (const item of items) {
                try {
                    const labelEl = item.querySelector('label');
                    if (!labelEl) continue;
                    const label = labelEl.textContent.trim();
                    if (!label) continue;

                    const base = normalizeLabelForFile(label);
                    // Log attempted filename for debugging
                    console.debug('Camo file check:', label, '->', base);

                    let found = false;

                    // If a data-image attribute is present on the item, prefer it (allows explicit filename mapping)
                    const explicit = item.dataset.image || item.getAttribute('data-image');
                    if (explicit) {
                        const url = explicit.startsWith('camos/') ? explicit : `camos/${explicit}`;
                        // If explicit lacks extension, try the extensions
                        if (/\.[a-zA-Z0-9]+$/.test(url)) {
                            if (await imageExists(url)) {
                                item.style.backgroundImage = `linear-gradient(rgba(0,0,0,0.30), rgba(0,0,0,0.30)), url('${url}')`;
                                item.classList.add('has-camo-image');
                                found = true;
                            } else {
                                console.info('explicit image not found for', label, url);
                            }
                        } else {
                            for (const ext of exts) {
                                const tryUrl = `${url}.${ext}`;
                                // eslint-disable-next-line no-await-in-loop
                                if (await imageExists(tryUrl)) {
                                    item.style.backgroundImage = `linear-gradient(rgba(0,0,0,0.30), rgba(0,0,0,0.30)), url('${tryUrl}')`;
                                    item.classList.add('has-camo-image');
                                    found = true;
                                    break;
                                }
                            }
                            if (!found) console.info('explicit image variants not found for', label, url);
                        }
                    }

                    if (!found) {
                        // We know exact path now: camos/Name_Camo_Icon_BO6.webp
                        const url = `camos/${base}`;
                        // eslint-disable-next-line no-await-in-loop
                        const ok = await imageExists(url);
                        console.debug('checking camo image', url, ok ? 'found' : 'not found');
                        if (ok) {
                            item.style.backgroundImage = `linear-gradient(rgba(0,0,0,0.30), rgba(0,0,0,0.30)), url('${url}')`;
                            item.classList.add('has-camo-image');
                            found = true;
                        }
                    }
                    // If not found, do nothing (keeps existing color background for specials)
                } catch (e) {
                    // Ignore per-item errors and continue
                    // eslint-disable-next-line no-console
                    console.warn('applyCamoImages error for item', e);
                }
            }
        }

        // Setup event listeners for checkboxes and collapsibles
        function setupEventListeners() {
            // Add Complete buttons to each weapon
            document.querySelectorAll('.weapon').forEach(weapon => {
                const weaponName = weapon.querySelector('.weapon-name');
                if (!weaponName.querySelector('.complete-btn')) {
                    const completeBtn = document.createElement('button');
                    completeBtn.className = 'complete-btn';
                    completeBtn.textContent = 'Complete';
                    weaponName.insertBefore(completeBtn, weaponName.firstChild);

                    // Update button state
                    updateCompleteButtonState(weapon);

                    // Complete button click handler
                    completeBtn.addEventListener('click', function(e) {
                        e.stopPropagation(); // Prevent collapse toggle
                        toggleWeaponComplete(weapon);
                    });
                }
            });

            // Checkbox listeners
            document.querySelectorAll('.camo-item input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const camoItem = this.closest('.camo-item');
                    const weapon = this.closest('.weapon');
                    camoItem.classList.toggle('completed', this.checked);
                    updateCompleteButtonState(weapon);
                    saveProgress();
                    updateProgress();
                });
            });

            // Make clicking anywhere on the .camo-item toggle the checkbox
            // (but ignore clicks directly on the checkbox itself so we don't double-toggle)
            document.querySelectorAll('.camo-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    // If the click originated from the checkbox (or a label/input), do nothing
                    if (e.target.closest('input[type="checkbox"]')) return;

                    const checkbox = this.querySelector('input[type="checkbox"]');
                    if (!checkbox) return;

                    // Toggle and trigger change so existing change handler runs
                    checkbox.checked = !checkbox.checked;
                    checkbox.dispatchEvent(new Event('change', { bubbles: true }));
                });
            });

            // Collapsible weapon listeners
            document.querySelectorAll('.weapon-name').forEach(weaponName => {
                weaponName.addEventListener('click', function(e) {
                    // Don't collapse if clicking the complete button
                    if (e.target.classList.contains('complete-btn')) return;

                    const weapon = this.closest('.weapon');
                    weapon.classList.toggle('collapsed');
                    saveCollapsedState();
                });
            });
        }

        // Toggle all checkboxes for a weapon
        function toggleWeaponComplete(weapon) {
            const checkboxes = weapon.querySelectorAll('.camo-item input[type="checkbox"]');
            const allChecked = Array.from(checkboxes).every(cb => cb.checked);

            checkboxes.forEach(checkbox => {
                checkbox.checked = !allChecked;
                const camoItem = checkbox.closest('.camo-item');
                camoItem.classList.toggle('completed', checkbox.checked);
            });

            updateCompleteButtonState(weapon);
            saveProgress();
            updateProgress();
        }

        // Update the complete button state based on weapon completion
        function updateCompleteButtonState(weapon) {
            const completeBtn = weapon.querySelector('.complete-btn');
            if (!completeBtn) return; // Safety check

            const weaponName = weapon.querySelector('.weapon-name');
            const checkboxes = weapon.querySelectorAll('.camo-item input[type="checkbox"]');
            const allChecked = Array.from(checkboxes).every(cb => cb.checked);

            if (allChecked) {
                completeBtn.classList.add('all-complete');
                completeBtn.textContent = 'Reset';
                weaponName.classList.add('weapon-complete');
            } else {
                completeBtn.classList.remove('all-complete');
                completeBtn.textContent = 'Complete';
                weaponName.classList.remove('weapon-complete');
            }
        }

        // Save progress to localStorage
        function saveProgress() {
            const config = getGameConfig();
            // Load existing progress first
            const saved = localStorage.getItem(config.storageKeys.progress);
            const progress = saved ? JSON.parse(saved) : {};

            const checkboxes = document.querySelectorAll('.camo-item input[type="checkbox"]');

            checkboxes.forEach(checkbox => {
                const weapon = checkbox.closest('.weapon');
                const weaponId = weapon?.dataset.weapon;
                const label = checkbox.nextElementSibling?.textContent;

                if (weaponId && label) {
                    if (!progress[weaponId]) progress[weaponId] = [];

                    // Remove the label if it exists (to avoid duplicates)
                    progress[weaponId] = progress[weaponId].filter(l => l !== label);

                    // Add it back if checked
                    if (checkbox.checked) {
                        progress[weaponId].push(label);
                    }
                }
            });

            localStorage.setItem(config.storageKeys.progress, JSON.stringify(progress));
        }

        // Restore progress from localStorage
        function restoreProgress() {
            const config = getGameConfig();
            const saved = localStorage.getItem(config.storageKeys.progress);
            if (!saved) return;

            const progress = JSON.parse(saved);

            document.querySelectorAll('.weapon').forEach(weapon => {
                const weaponId = weapon.dataset.weapon;
                const completed = progress[weaponId] || [];

                weapon.querySelectorAll('.camo-item').forEach(item => {
                    const checkbox = item.querySelector('input[type="checkbox"]');
                    const label = checkbox?.nextElementSibling?.textContent;

                    if (label && completed.includes(label)) {
                        checkbox.checked = true;
                        item.classList.add('completed');
                    }
                });

                // Update complete button state after restoring
                updateCompleteButtonState(weapon);
            });

            restoreCollapsedState();
        }

        // Save collapsed state
        function saveCollapsedState() {
            const config = getGameConfig();
            const collapsed = [];
            document.querySelectorAll('.weapon.collapsed').forEach(weapon => {
                const weaponId = weapon.dataset.weapon;
                if (weaponId) collapsed.push(weaponId);
            });
            localStorage.setItem(config.storageKeys.collapsed, JSON.stringify(collapsed));
        }

        // Restore collapsed state
        function restoreCollapsedState() {
            const config = getGameConfig();
            const saved = localStorage.getItem(config.storageKeys.collapsed);
            if (!saved) return;

            const collapsed = JSON.parse(saved);
            document.querySelectorAll('.weapon').forEach(weapon => {
                const weaponId = weapon.dataset.weapon;
                if (collapsed.includes(weaponId)) {
                    weapon.classList.add('collapsed');
                }
            });
        }

        // Update overall progress
        function updateProgress() {
            const config = getGameConfig();
            const totalCamos = config.totalCamos;
            const totalWeapons = config.totalWeapons;

            // Count completed camos across all saved data
            const saved = localStorage.getItem(config.storageKeys.progress);
            let completedCamos = 0;
            let completedWeapons = 0;

            if (saved) {
                const progress = JSON.parse(saved);
                Object.values(progress).forEach(weaponCamos => {
                    completedCamos += weaponCamos.length;
                    if (weaponCamos.length === config.camosPerWeapon) { // All camos for a weapon
                        completedWeapons++;
                    }
                });
            }

            // Handle division by zero for BO7 (no weapons yet)
            const percentage = totalCamos > 0 ? ((completedCamos / totalCamos) * 100).toFixed(1) : '0.0';

            document.getElementById('overall-progress').textContent =
                `${completedCamos} / ${totalCamos} Camos Completed (${percentage}%)`;
            document.getElementById('weapon-progress').textContent =
                `${completedWeapons} / ${totalWeapons} Weapons Complete`;
        }

        // Export progress to JSON file
        function exportProgress() {
            // Export both games' progress
            const backup = {
                version: '2.0', // Updated version to support multi-game
                exportDate: new Date().toISOString(),
                data: {
                    bo6: {
                        progress: JSON.parse(localStorage.getItem('bo6CamoProgress') || '{}'),
                        collapsed: JSON.parse(localStorage.getItem('bo6CollapsedWeapons') || '[]')
                    },
                    bo7: {
                        progress: JSON.parse(localStorage.getItem('bo7CamoProgress') || '{}'),
                        collapsed: JSON.parse(localStorage.getItem('bo7CollapsedWeapons') || '[]')
                    },
                    selectedGame: localStorage.getItem('selectedGame') || 'bo6'
                }
            };

            const dataStr = JSON.stringify(backup, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);

            const link = document.createElement('a');
            link.href = url;
            link.download = `camo-tracker-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);

            alert('Progress exported successfully! (Both BO6 and BO7 data included)');
        }

        // Import progress from JSON file
        function importProgress() {
            document.getElementById('import-file').click();
        }

        function handleImportFile(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const backup = JSON.parse(e.target.result);

                    // Validate backup structure
                    if (!backup.data) {
                        throw new Error('Invalid backup file format');
                    }

                    const confirmMsg = `Import backup from ${backup.exportDate ? new Date(backup.exportDate).toLocaleDateString() : 'unknown date'}?\n\nThis will replace your current progress for both games!`;

                    if (confirm(confirmMsg)) {
                        // Handle both old (v1.0) and new (v2.0) backup formats
                        if (backup.version === '2.0' && backup.data.bo6 && backup.data.bo7) {
                            // New format with both games
                            localStorage.setItem('bo6CamoProgress', JSON.stringify(backup.data.bo6.progress));
                            localStorage.setItem('bo6CollapsedWeapons', JSON.stringify(backup.data.bo6.collapsed));
                            localStorage.setItem('bo7CamoProgress', JSON.stringify(backup.data.bo7.progress));
                            localStorage.setItem('bo7CollapsedWeapons', JSON.stringify(backup.data.bo7.collapsed));
                            if (backup.data.selectedGame) {
                                localStorage.setItem('selectedGame', backup.data.selectedGame);
                                switchGame(backup.data.selectedGame);
                            }
                        } else if (backup.data.bo6CamoProgress !== undefined) {
                            // Old format (v1.0) - only BO6 data
                            localStorage.setItem('bo6CamoProgress', JSON.stringify(backup.data.bo6CamoProgress));
                            if (backup.data.bo6CollapsedWeapons) {
                                localStorage.setItem('bo6CollapsedWeapons', JSON.stringify(backup.data.bo6CollapsedWeapons));
                            }
                        } else {
                            throw new Error('Unrecognized backup format');
                        }

                        // Reload current category to reflect changes
                        if (currentCategory) {
                            loadCategory(currentCategory);
                        }
                        updateProgress();

                        alert('Progress imported successfully!');
                    }
                } catch (error) {
                    alert('Error importing backup: ' + error.message + '\n\nPlease make sure you selected a valid backup file.');
                }

                // Reset file input
                event.target.value = '';
            };

            reader.readAsText(file);
        }

        // Reset all progress
        function resetProgress() {
            const resetBothGames = confirm('Do you want to reset progress for BOTH games?\n\nClick OK to reset both games, or Cancel to reset only the current game.');

            if (resetBothGames) {
                if (confirm('Are you sure you want to reset ALL progress for BOTH games? This cannot be undone!')) {
                    // Reset both games
                    localStorage.removeItem('bo6CamoProgress');
                    localStorage.removeItem('bo6CollapsedWeapons');
                    localStorage.removeItem('bo7CamoProgress');
                    localStorage.removeItem('bo7CollapsedWeapons');

                    document.querySelectorAll('.camo-item input[type="checkbox"]').forEach(checkbox => {
                        checkbox.checked = false;
                        checkbox.closest('.camo-item').classList.remove('completed');
                    });

                    updateProgress();
                    alert('All progress for both games has been reset.');
                }
            } else {
                // Reset current game only
                const config = getGameConfig();
                const gameName = config.name;
                if (confirm(`Are you sure you want to reset ALL progress for ${gameName}? This cannot be undone!`)) {
                    localStorage.removeItem(config.storageKeys.progress);
                    localStorage.removeItem(config.storageKeys.collapsed);

                    document.querySelectorAll('.camo-item input[type="checkbox"]').forEach(checkbox => {
                        checkbox.checked = false;
                        checkbox.closest('.camo-item').classList.remove('completed');
                    });

                    updateProgress();
                    alert(`Progress for ${gameName} has been reset.`);
                }
            }
        }

        // Game selector click handlers
        document.querySelectorAll('.game-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                switchGame(btn.dataset.game);
            });
        });

        // Tab click handlers
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                loadCategory(btn.dataset.category);
            });
        });

        // Load first category on page load
        window.addEventListener('load', () => {
            // Check if running without a web server (file:// protocol)
            if (window.location.protocol === 'file:') {
                document.getElementById('server-warning').style.display = 'block';
                console.error('‚ö†Ô∏è This app requires a local web server. Please run: python -m http.server 8000');
                return; // Stop initialization if not running on a server
            }

            // Initialize game selector UI
            switchGame(currentGame);
            updateProgress(); // Update progress even before loading a category
            loadCategory('assault-rifles');
        });
    </script>
</body>
</html>
